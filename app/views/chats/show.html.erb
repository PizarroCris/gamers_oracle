<div class="chat-container">

  <div class="chat-header">
    <h2><%= @game.name %> - Chat #<%= @chat.id %></h2>
    <%= link_to "Delete Chat",
                chat_path(@chat),
                method: :delete,
                data: { turbo_confirm: "Are you sure?" },
                class: "btn-brown" %>
    <%= link_to "Back to chats", chats_path, class: "btn-brown ml-2" %>
  </div>

  <div id="messages_list" class="chat-messages">
    <% @chat.messages.order(:created_at).each do |msg| %>
      <div class="chat-message <%= msg.role == 'user' ? 'user-message' : 'ai-message' %>">
        <%= msg.message %>
      </div>
    <% end %>
  </div>

  <div class="chat-input">
    <%= form_with url: chat_messages_path(@chat), method: :post, local: false, data: { turbo: true }, id: "new_message_form" do %>
      <input type="text" name="message" placeholder="Ask the AI..." autocomplete="off" class="message-field">
      <i class="fa-solid fa-paper-plane" type="submit"></i>
    <% end %>
  </div>

</div>
